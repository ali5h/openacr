## bzg - Internals


### Sources
<a href="#sources"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Sources -->
The source code license is GPL
The following source files are part of this tool:

|Source File|Comment|
|---|---|
|[cpp/bzg/bzg.cpp](/cpp/bzg/bzg.cpp)||
|[cpp/gen/bzg_gen.cpp](/cpp/gen/bzg_gen.cpp)||
|[include/bzg.h](/include/bzg.h)||
|[include/gen/bzg_gen.h](/include/gen/bzg_gen.h)||
|[include/gen/bzg_gen.inl.h](/include/gen/bzg_gen.inl.h)||

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Sources -->

### Dependencies
<a href="#dependencies"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Dependencies -->
The build target depends on the following libraries
|Target|Comment|
|---|---|
|[algo_lib](/txt/lib/algo_lib/README.md)|Support library for all executables|
|[lib_prot](/txt/lib/lib_prot/README.md)|Library covering all protocols|

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Dependencies -->

### In Memory DB
<a href="#in-memory-db"></a>
<!-- dev.mdmark  mdmark:MDSECTION  state:BEG_AUTO  param:Imdb -->
`bzg` generated code creates the tables below.
All allocations are done through global `bzg::_db` [bzg.FDb](#bzg-fdb) structure
|Ctype|Ssimfile|Create|Access|
|---|---|---|---|
|[bzg.FDb](#bzg-fdb)||FDb._db (Global)|
|[bzg.FNs](#bzg-fns)|[dmmeta.ns](/txt/ssimdb/dmmeta/ns.md)|FDb.ns (Lary)|ns (Lary, by rowid)|ind_ns (Thash, hash field ns)|
||||FTargsyslib.p_ns (Upptr)|
|[bzg.FTargdep](#bzg-ftargdep)|[dev.targdep](/txt/ssimdb/dev/targdep.md)|FDb.targdep (Lary)|targdep (Lary, by rowid)|
||||FNs.zd_targdep (Llist)|
|[bzg.FTargsrc](#bzg-ftargsrc)|[dev.targsrc](/txt/ssimdb/dev/targsrc.md)|FDb.targsrc (Lary)|targsrc (Lary, by rowid)|
||||FNs.zd_targsrc (Llist)|
|[bzg.FTargsyslib](#bzg-ftargsyslib)|[dev.targsyslib](/txt/ssimdb/dev/targsyslib.md)|FDb.targsyslib (Lary)|targsyslib (Lary, by rowid)|
||||FNs.zd_targsyslib (Llist)|
|[bzg.FToolOpt](#bzg-ftoolopt)|[dev.tool_opt](/txt/ssimdb/dev/tool_opt.md)|FDb.tool_opt (Lary)|tool_opt (Lary, by rowid)|

#### bzg.FDb - 
<a href="#bzg-fdb"></a>

#### bzg.FDb Fields
<a href="#bzg-fdb-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FDb._db|[bzg.FDb](/txt/exe/bzg/internals.md#bzg-fdb)|[Global](/txt/exe/amc/reftypes.md#global)|||
|bzg.FDb.cmdline|[command.bzg](/txt/protocol/command/README.md#command-bzg)|[Val](/txt/exe/amc/reftypes.md#val)|||
|bzg.FDb.targsrc|[bzg.FTargsrc](/txt/exe/bzg/internals.md#bzg-ftargsrc)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|bzg.FDb.targdep|[bzg.FTargdep](/txt/exe/bzg/internals.md#bzg-ftargdep)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|bzg.FDb.tool_opt|[bzg.FToolOpt](/txt/exe/bzg/internals.md#bzg-ftoolopt)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|bzg.FDb.ns|[bzg.FNs](/txt/exe/bzg/internals.md#bzg-fns)|[Lary](/txt/exe/amc/reftypes.md#lary)|||
|bzg.FDb.ind_ns|[bzg.FNs](/txt/exe/bzg/internals.md#bzg-fns)|[Thash](/txt/exe/amc/reftypes.md#thash)|||
|bzg.FDb.targsyslib|[bzg.FTargsyslib](/txt/exe/bzg/internals.md#bzg-ftargsyslib)|[Lary](/txt/exe/amc/reftypes.md#lary)|||

#### Struct FDb
<a href="#struct-fdb"></a>
Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FDb { // bzg.FDb
    command::bzg        cmdline;                //
    bzg::FTargsrc*      targsrc_lary[32];       // level array
    i32                 targsrc_n;              // number of elements in array
    bzg::FTargdep*      targdep_lary[32];       // level array
    i32                 targdep_n;              // number of elements in array
    bzg::FToolOpt*      tool_opt_lary[32];      // level array
    i32                 tool_opt_n;             // number of elements in array
    bzg::FNs*           ns_lary[32];            // level array
    i32                 ns_n;                   // number of elements in array
    bzg::FNs**          ind_ns_buckets_elems;   // pointer to bucket array
    i32                 ind_ns_buckets_n;       // number of elements in bucket array
    i32                 ind_ns_n;               // number of elements in the hash table
    bzg::FTargsyslib*   targsyslib_lary[32];    // level array
    i32                 targsyslib_n;           // number of elements in array
    bzg::trace          trace;                  //
};
```

#### bzg.FNs - Namespace (for in-memory database, protocol, etc)
<a href="#bzg-fns"></a>

#### bzg.FNs Fields
<a href="#bzg-fns-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FNs.base|[dmmeta.Ns](/txt/ssimdb/dmmeta/ns.md)|[Base](/txt/ssimdb/dmmeta/ns.md)|||
|bzg.FNs.zd_targsrc|[bzg.FTargsrc](/txt/exe/bzg/internals.md#bzg-ftargsrc)|[Llist](/txt/exe/amc/reftypes.md#llist)|||
|bzg.FNs.zd_targdep|[bzg.FTargdep](/txt/exe/bzg/internals.md#bzg-ftargdep)|[Llist](/txt/exe/amc/reftypes.md#llist)|||
|bzg.FNs.zd_targsyslib|[bzg.FTargsyslib](/txt/exe/bzg/internals.md#bzg-ftargsyslib)|[Llist](/txt/exe/amc/reftypes.md#llist)|||

#### Struct FNs
<a href="#struct-fns"></a>
*Note:* field ``bzg.FNs.base`` has reftype ``base`` so the fields of [dmmeta.Ns](/txt/ssimdb/dmmeta/ns.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FNs { // bzg.FNs
    bzg::FNs*           ind_ns_next;          // hash next
    algo::Smallstr16    ns;                   // Namespace name (primary key)
    algo::Smallstr50    nstype;               // Namespace type
    algo::Smallstr50    license;              // Associated license
    algo::Comment       comment;              //
    bzg::FTargsrc*      zd_targsrc_head;      // zero-terminated doubly linked list
    i32                 zd_targsrc_n;         // zero-terminated doubly linked list
    bzg::FTargsrc*      zd_targsrc_tail;      // pointer to last element
    bzg::FTargdep*      zd_targdep_head;      // zero-terminated doubly linked list
    i32                 zd_targdep_n;         // zero-terminated doubly linked list
    bzg::FTargdep*      zd_targdep_tail;      // pointer to last element
    bzg::FTargsyslib*   zd_targsyslib_head;   // zero-terminated doubly linked list
    i32                 zd_targsyslib_n;      // zero-terminated doubly linked list
    bzg::FTargsyslib*   zd_targsyslib_tail;   // pointer to last element
    // reftype Llist of bzg.FNs.zd_targsrc prohibits copy
    // reftype Llist of bzg.FNs.zd_targdep prohibits copy
    // reftype Llist of bzg.FNs.zd_targsyslib prohibits copy
    // func:bzg.FNs..AssignOp
    inline bzg::FNs&     operator =(const bzg::FNs &rhs) = delete;
    // reftype Llist of bzg.FNs.zd_targsrc prohibits copy
    // reftype Llist of bzg.FNs.zd_targdep prohibits copy
    // reftype Llist of bzg.FNs.zd_targsyslib prohibits copy
    // func:bzg.FNs..CopyCtor
    inline               FNs(const bzg::FNs &rhs) = delete;
private:
    // func:bzg.FNs..Ctor
    inline               FNs() __attribute__((nothrow));
    // func:bzg.FNs..Dtor
    inline               ~FNs() __attribute__((nothrow));
    friend bzg::FNs&            ns_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend bzg::FNs*            ns_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 ns_RemoveAll() __attribute__((nothrow));
    friend void                 ns_RemoveLast() __attribute__((nothrow));
};
```

#### bzg.FTargdep - Dependency between targets
<a href="#bzg-ftargdep"></a>

#### bzg.FTargdep Fields
<a href="#bzg-ftargdep-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FTargdep.base|[dev.Targdep](/txt/ssimdb/dev/targdep.md)|[Base](/txt/ssimdb/dev/targdep.md)|||

#### Struct FTargdep
<a href="#struct-ftargdep"></a>
*Note:* field ``bzg.FTargdep.base`` has reftype ``base`` so the fields of [dev.Targdep](/txt/ssimdb/dev/targdep.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FTargdep { // bzg.FTargdep
    bzg::FTargdep*     zd_targdep_next;   // zslist link; -1 means not-in-list
    bzg::FTargdep*     zd_targdep_prev;   // previous element
    algo::Smallstr50   targdep;           // Primary key - target.parent
    algo::Comment      comment;           //
    // func:bzg.FTargdep..AssignOp
    inline bzg::FTargdep& operator =(const bzg::FTargdep &rhs) = delete;
    // func:bzg.FTargdep..CopyCtor
    inline               FTargdep(const bzg::FTargdep &rhs) = delete;
private:
    // func:bzg.FTargdep..Ctor
    inline               FTargdep() __attribute__((nothrow));
    // func:bzg.FTargdep..Dtor
    inline               ~FTargdep() __attribute__((nothrow));
    friend bzg::FTargdep&       targdep_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend bzg::FTargdep*       targdep_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 targdep_RemoveAll() __attribute__((nothrow));
    friend void                 targdep_RemoveLast() __attribute__((nothrow));
};
```

#### bzg.FTargsrc - List of sources for target
<a href="#bzg-ftargsrc"></a>

#### bzg.FTargsrc Fields
<a href="#bzg-ftargsrc-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FTargsrc.base|[dev.Targsrc](/txt/ssimdb/dev/targsrc.md)|[Base](/txt/ssimdb/dev/targsrc.md)|||

#### Struct FTargsrc
<a href="#struct-ftargsrc"></a>
*Note:* field ``bzg.FTargsrc.base`` has reftype ``base`` so the fields of [dev.Targsrc](/txt/ssimdb/dev/targsrc.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FTargsrc { // bzg.FTargsrc
    bzg::FTargsrc*      zd_targsrc_next;   // zslist link; -1 means not-in-list
    bzg::FTargsrc*      zd_targsrc_prev;   // previous element
    algo::Smallstr100   targsrc;           //
    algo::Comment       comment;           //
    // func:bzg.FTargsrc..AssignOp
    inline bzg::FTargsrc& operator =(const bzg::FTargsrc &rhs) = delete;
    // func:bzg.FTargsrc..CopyCtor
    inline               FTargsrc(const bzg::FTargsrc &rhs) = delete;
private:
    // func:bzg.FTargsrc..Ctor
    inline               FTargsrc() __attribute__((nothrow));
    // func:bzg.FTargsrc..Dtor
    inline               ~FTargsrc() __attribute__((nothrow));
    friend bzg::FTargsrc&       targsrc_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend bzg::FTargsrc*       targsrc_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 targsrc_RemoveAll() __attribute__((nothrow));
    friend void                 targsrc_RemoveLast() __attribute__((nothrow));
};
```

#### bzg.FTargsyslib - Use of system library by target
<a href="#bzg-ftargsyslib"></a>

#### bzg.FTargsyslib Fields
<a href="#bzg-ftargsyslib-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FTargsyslib.base|[dev.Targsyslib](/txt/ssimdb/dev/targsyslib.md)|[Base](/txt/ssimdb/dev/targsyslib.md)|||
|bzg.FTargsyslib.p_ns|[bzg.FNs](/txt/exe/bzg/internals.md#bzg-fns)|[Upptr](/txt/exe/amc/reftypes.md#upptr)|||

#### Struct FTargsyslib
<a href="#struct-ftargsyslib"></a>
*Note:* field ``bzg.FTargsyslib.base`` has reftype ``base`` so the fields of [dev.Targsyslib](/txt/ssimdb/dev/targsyslib.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FTargsyslib { // bzg.FTargsyslib
    bzg::FTargsyslib*   zd_targsyslib_next;   // zslist link; -1 means not-in-list
    bzg::FTargsyslib*   zd_targsyslib_prev;   // previous element
    algo::Smallstr50    targsyslib;           //
    algo::Comment       comment;              //
    bzg::FNs*           p_ns;                 // reference to parent row
    // x-reference on bzg.FTargsyslib.p_ns prevents copy
    // func:bzg.FTargsyslib..AssignOp
    inline bzg::FTargsyslib& operator =(const bzg::FTargsyslib &rhs) = delete;
    // x-reference on bzg.FTargsyslib.p_ns prevents copy
    // func:bzg.FTargsyslib..CopyCtor
    inline               FTargsyslib(const bzg::FTargsyslib &rhs) = delete;
private:
    // func:bzg.FTargsyslib..Ctor
    inline               FTargsyslib() __attribute__((nothrow));
    // func:bzg.FTargsyslib..Dtor
    inline               ~FTargsyslib() __attribute__((nothrow));
    friend bzg::FTargsyslib&    targsyslib_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend bzg::FTargsyslib*    targsyslib_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 targsyslib_RemoveAll() __attribute__((nothrow));
    friend void                 targsyslib_RemoveLast() __attribute__((nothrow));
};
```

#### bzg.FToolOpt - Compiler/linker options to use
<a href="#bzg-ftoolopt"></a>

#### bzg.FToolOpt Fields
<a href="#bzg-ftoolopt-fields"></a>
|Field|[Type](/txt/ssimdb/dmmeta/ctype.md)|[Reftype](/txt/ssimdb/dmmeta/reftype.md)|Default|Comment|
|---|---|---|---|---|
|bzg.FToolOpt.base|[dev.ToolOpt](/txt/ssimdb/dev/tool_opt.md)|[Base](/txt/ssimdb/dev/tool_opt.md)|||
|bzg.FToolOpt.regx_opt|[algo.cstring](/txt/protocol/algo/cstring.md)|[RegxSql](/txt/exe/amc/reftypes.md#regxsql)|||
|bzg.FToolOpt.regx_target|[algo.cstring](/txt/protocol/algo/cstring.md)|[RegxSql](/txt/exe/amc/reftypes.md#regxsql)|||
|bzg.FToolOpt.select|bool|[Val](/txt/exe/amc/reftypes.md#val)|||

#### Struct FToolOpt
<a href="#struct-ftoolopt"></a>
*Note:* field ``bzg.FToolOpt.base`` has reftype ``base`` so the fields of [dev.ToolOpt](/txt/ssimdb/dev/tool_opt.md) above are included into the resulting struct.

Generated by [amc](/txt/exe/amc/README.md) into [include/gen/bzg_gen.h](/include/gen/bzg_gen.h)
```
struct FToolOpt { // bzg.FToolOpt
    algo::Smallstr100   tool_opt;      // Primary key - uname.compiler-cfg.arch/target-opt_type:opt
    algo::Comment       comment;       //
    algo_lib::Regx      regx_opt;      // Sql Regx
    algo_lib::Regx      regx_target;   // Sql Regx
    bool                select;        //   false
private:
    // func:bzg.FToolOpt..Ctor
    inline               FToolOpt() __attribute__((nothrow));
    friend bzg::FToolOpt&       tool_opt_Alloc() __attribute__((__warn_unused_result__, nothrow));
    friend bzg::FToolOpt*       tool_opt_AllocMaybe() __attribute__((__warn_unused_result__, nothrow));
    friend void                 tool_opt_RemoveAll() __attribute__((nothrow));
    friend void                 tool_opt_RemoveLast() __attribute__((nothrow));
};
```

<!-- dev.mdmark  mdmark:MDSECTION  state:END_AUTO  param:Imdb -->

